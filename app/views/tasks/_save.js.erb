$("ul.errors").html("")
<% if @task.errors.any? %>
  <% @task.errors.full_messages.each do |message| %>
    $("ul.errors").append($("<li />").html("<%= message.html_safe %>"))
  <% end %>
<% else %>
  $('.alert').remove()
  $("#task-modal").modal("hide")
  $('.isotope').isotope({transitionDuration: 0});
  $('.isotope').isotope( 'remove', $('.task') )
  var $task = $('<%= j render @tasks %>')
  $('.isotope').append($task).isotope('appended', $task)
  $('.isotope').isotope({transitionDuration: '0.4s'});
<% end %>